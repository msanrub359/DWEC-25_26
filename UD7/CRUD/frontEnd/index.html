<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CRM Dashboard</title>

  <!-- Bootstrap 5 -->
  <link rel="stylesheet" href="../../../librerias/bootstrap/css/bootstrap.min.css" rel="stylesheet">

  <!-- ICONOS fontawesome -->
  <link rel="stylesheet" href="../../../librerias/fontawesome/css/all.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../../../librerias/tabulator/tabulator.min.css">
  <link rel="stylesheet" href="../../../librerias/sweetAlert/sweetalert2.css">
  <link rel="stylesheet" href="./css/styles.css" />
</head>

<body>
  <div class="app-layout">

    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="sidebar-header">
        <i class="bi bi-grid-3x3-gap-fill fs-4"></i>
        <span class="brand">CRUD</span>
      </div>

      <nav class="sidebar-menu mt-3">

        <a href="#"><i class="bi bi-people"></i> Usuarios</a>

      </nav>
    </aside>

    <!-- TOPBAR -->
    <header class="topbar">
      <div class="input-group search-box">

      </div>

      <div class="d-flex align-items-center">
        <span class="me-2 fw-semibold"> Usuarios</span>
        <img src="https://i.pravatar.cc/40" class="rounded-circle" />
      </div>
    </header>

    <!-- CONTENIDO PRINCIPAL -->
    <main class="main">
      <div class="card shadow-sm border-0">
        <div class="card-body">

          <div class="d-flex justify-content-between align-items-center mb-3">
            <h4 class="fw-bold mb-0"><i class="fa-solid fa-users"></i>Usuarios</h4>

            <button class="btn btn-primary rounded-pill addUser">
              <i class="bi bi-person-plus"></i> Añadir usuario
            </button>
          </div>
          <div class="toolbar">
            <div class="search-box">
              <input type="text" id="filtrar" placeholder="Buscar en toda la tabla...">
            </div>


            <button class="clear" id="clearFilters">
              <i class="fa-solid fa-trash-arrow-up"></i> Limpiar Filtros
            </button>
          </div>
          <div id="data-table"></div>

          <!-- Mensaje de estado (éxito o error) -->
          <div id="mensajeEstado" class="alert text-center fw-bold d-none" role="alert"></div>

          <!-- Ventana Modal -->
          <div class="modal fade" id="frmModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
            aria-labelledby="frmModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered">
              <div class="modal-content">
                <!-- Header -->
                <div class="modal-header bg-primary text-white">
                  <h5 class="modal-title" id="frmModalLabel">
                    <i class="fa-solid fa-user-plus me-2"></i>
                    <span id="modalTitle">Nuevo Usuario</span>
                  </h5>
                  <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                    aria-label="Cerrar"></button>
                </div>

                <!-- Body -->
                <div class="modal-body p-4">
                  <form id="frmUsuario" class="needs-validation" novalidate>
                    <!-- Campo oculto para ID (usado en edición) -->
                    <input type="hidden" id="idUser" name="idUser">

                    <div class="row">
                      <!-- Columna Izquierda -->
                      <div class="col-md-6">
                        <!-- Nombre -->
                        <div class="mb-3">
                          <label for="nameUser" class="form-label">
                            <i class="fa-solid fa-signature text-primary me-1"></i>
                            Nombre <span class="text-danger">*</span>
                          </label>
                          <div class="input-group">

                            <input type="text" class="form-control" id="nameUser" name="nameUser"
                              placeholder="Juan Pérez" required minlength="3" maxlength="100">

                          </div>
                        </div>

                        <!-- Password -->
                        <div class="mb-3">
                          <label for="passUser" class="form-label">
                            <i class="fa-solid fa-envelope text-primary me-1"></i>
                            Password <span class="text-danger">*</span>
                          </label>
                          <div class="input-group">

                            <input type="password" class="form-control" id="passUser" name="passUser">

                          </div>
                        </div>

                        <!-- Estado Activo/Inactivo -->
                        <div class="mb-3">
                          <label class="form-label">
                            <i class="fa-solid fa-toggle-on text-primary me-1"></i>
                            Estado
                          </label>
                          <div class="form-check form-switch">
                            <input class="form-check-input" type="checkbox" role="switch" id="activeUser"
                              name="activeUser">
                            <label class="form-check-label" for="activeUser">
                              <span id="statusLabel">Activo</span>
                            </label>
                          </div>
                        </div>
                      </div>

                      <!-- Columna Derecha -->
                      <div class="col-md-6">
                        <!-- Email -->
                        <div class="mb-3">
                          <label for="emailUser" class="form-label">
                            <i class="fa-solid fa-phone text-primary me-1"></i>
                            email <span class="text-danger">*</span>
                          </label>
                          <div class="input-group">

                            <input type="tel" class="form-control" id="emailUser" name="emailUser"
                              placeholder="juan@empresa.com">

                          </div>
                        </div>
                        <!-- Rol -->
                        <div class="mb-3">
                          <label for="roleUser" class="form-label">
                            <i class="fa-solid fa-user-tag text-primary me-1"></i>
                            Rol <span class="text-danger">*</span>
                          </label>
                          <div class="input-group">

                            <select class="form-select" id="roleUser" name="roleUser">
                              <option value="" selected>Selecciona...</option>
                              <option value="Admin">Admin</option>
                              <option value="Usuario">Usuario</option>
                              <option value="Editor">Editor</option>
                              <option value="Visor">Visor</option>
                            </select>

                          </div>
                        </div>

                      </div>
                    </div>
                    <!-- Footer -->
                    <div class="modal-footer bg-light">
                      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">
                        <i class="fa-solid fa-xmark me-1"></i>
                        Cancelar
                      </button>
                      <button type="submit" class="btn btn-primary" id="btnSubmit">
                        <i class="fa-solid fa-floppy-disk me-1"></i>
                        <span id="btnSubmitText">Guardar Usuario</span>
                      </button>
                    </div>
                  </form>
                </div>



              </div>
            </div>
          </div>

        </div>
      </div>
    </main>
    <script src="../../../librerias/bootstrap/js/bootstrap.min.js"></script>
    <script src="../../../librerias/tabulator/tabulator.min.js"></script>
    <script src="../../../librerias/justValidation/just-validate.production.min.js"></script>
    <script src="../../../librerias/sweetAlert/sweetalert2.all.js"></script>
   
    <script type="module" src="./js/app.js"></script>

  </div>

</body>

</html>